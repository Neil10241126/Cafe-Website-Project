import{l as p,o as s,c as i,d as a,I as u,K as V,a as j,D as T,s as C,b as E,E as x,r as F,e as b,i as q,g as l,t as c,h as G,w as N,G as w,f as R,m as D,H as B,n as H,p as K,q as M}from"./index-77ePXirE.js";import{_ as O}from"./LoadingUi-SLRfSRDX.js";import{_ as U}from"./plugin-vueexport-helper-x3n3nnut.js";const A=["src","loading"],J={__name:"LazyloadImage",props:{imageUrl:String,lazyImageUrl:String,setting:{type:String,default:"lazy"}},emits:["imageReady"],setup(e,{emit:o}){const y=e,m=o,f=p(null),d=p(null),r=p(!1);function _(){m("imageReady",r.value=!0)}return(k,n)=>(s(),i("div",{class:u(["blur-loaded",{loaded:r.value}]),ref_key:"blurDiv",ref:f,style:V(`background-image: url(${e.lazyImageUrl})`)},[a("img",{ref_key:"img",ref:d,src:y.imageUrl,loading:e.setting,onLoad:n[0]||(n[0]=g=>_()),alt:"none"},null,40,A)],6))}},P=U(J,[["__scopeId","data-v-6341e05e"]]),v=e=>(K("data-v-4e2a6379"),e=e(),M(),e),Q={key:0,class:"card border border-gray-400 rounded-3",style:{"max-width":"300px"}},W={class:"img-cover overflow-hidden rounded-top-3"},X={class:"card-body bg-secondary-tint rounded-bottom-3 px-2 p-xxs-3"},Y={class:"d-flex justify-content-between mb-lg-2"},Z=v(()=>a("i",{class:"bi bi-box-arrow-in-up-right"},null,-1)),ee={key:0,class:"mb-2"},ae={class:"mb-1"},te=v(()=>a("span",{class:"fs-8 text-gray-600 me-2"},"產地 :",-1)),se={class:"fs-8 text-gray-600"},oe={class:"mb-3"},ie=v(()=>a("span",{class:"fs-8 text-gray-600 me-2"},"酸度 :",-1)),le={class:"fs-8 text-gray-600"},de={class:"d-flex align-items-center"},re={key:0,class:"text-gray-600"},ne={key:1,class:"d-flex"},ce=["disabled"],ue={class:"bi bi-cart3"},me=v(()=>a("i",{class:"bi bi-cart3 ms-2 d-none d-xxs-inline"},null,-1)),ge={key:1,class:"card",style:{"max-width":"300px"}},be={class:"card-img-top placeholder bg-primary"},pe=H('<div class="card-body bg-secondary-tint rounded-bottom-3" data-v-4e2a6379><div class="placeholder-glow" data-v-4e2a6379><h5 class="placeholder bg-primary rounded-pill col-4" data-v-4e2a6379></h5></div><p class="fs-8 placeholder-glow d-none d-lg-block" data-v-4e2a6379><span class="placeholder bg-primary rounded-pill col-8" data-v-4e2a6379></span><span class="placeholder bg-primary rounded-pill col-5" data-v-4e2a6379></span></p><div class="row gx-2 placeholder-glow" data-v-4e2a6379><div class="col-12 col-lg-8" data-v-4e2a6379><button class="btn bg-primary border-primary w-100 disabled placeholder" data-v-4e2a6379></button></div><div class="col-lg-4 d-none d-lg-block" data-v-4e2a6379><button class="btn bg-primary border-primary w-100 disabled placeholder" data-v-4e2a6379></button></div></div></div>',1),ve={__name:"ProductCard",props:{title:String,origin:String,acdity:Number,price:Number,origin_price:Number,img_url:String,product_id:String,card_details:Boolean},setup(e){const o=e,y=j(),{addToCart:m}=y,f=T(),{loadingObj:d}=C(f),r=E(),{favorites:_}=C(r),{toggleFavorite:k}=r,n=x(()=>_.value.list.some(t=>t.id===o.product_id)),g=x(()=>o.price<o.origin_price),S=x(()=>o.title.replace(/\s/g,"")),$=p(!0),I=h=>{$.value=!h};return(h,t)=>{const L=F("RouterLink");return $.value?(s(),i("div",ge,[a("div",be,[b(P,{class:"opacity-0","image-url":e.img_url,"lazy-image-url":`/public/images/compression-img/small-${S.value}.jpg`,onImageReady:I},null,8,["image-url","lazy-image-url"])]),pe])):(s(),i("div",Q,[a("div",W,[b(P,{"image-url":e.img_url,"lazy-image-url":`/public/images/compression-img/small-${S.value}.jpg`,onImageReady:I},null,8,["image-url","lazy-image-url"])]),a("a",{href:"#",class:u(["favorite-btn border border-3 rounded-circle p-2 d-flex p-0",{"border-warning":n.value}]),onClick:t[0]||(t[0]=q(z=>l(k)(o.product_id),["prevent"]))},[a("i",{class:u(["bi bi-suit-heart-fill link-light d-flex fs-8",{"text-warning":n.value}])},null,2)],2),a("div",X,[a("div",Y,[a("h5",{class:u(["fs-8 fs-xxs-6 fw-semibold mb-0 me-2",{"mb-4":!e.card_details}])},c(e.title),3),e.card_details?w("",!0):(s(),G(L,{key:0,class:"fs-6 text-gray-800 lh-21px lh-sm-30px",to:`/products/${e.product_id}`},{default:N(()=>[Z]),_:1},8,["to"]))]),e.card_details?(s(),i("div",ee,[a("div",ae,[te,a("span",se,c(e.origin),1)]),a("div",oe,[ie,a("span",le,c(`${e.acdity}分`),1)]),a("div",de,[a("span",{class:u(["fs-6 text-primary fw-bold me-2",{"text-danger":g.value}])},c(g.value?`特價$ ${e.price}`:`售價$ ${e.price}`),3),g.value?(s(),i("span",re,[a("del",null,c(`原價$ ${e.origin_price}`),1)])):w("",!0)])])):w("",!0),e.card_details?(s(),i("div",ne,[b(L,{to:`/products/${e.product_id}`,class:"btn btn-outline-primary border-2 w-100"},{default:N(()=>[R(" 查看更多 ")]),_:1},8,["to"]),a("button",{type:"button",class:"btn btn-primary ms-2",onClick:t[1]||(t[1]=z=>l(m)(e.product_id,1)),disabled:l(d).isLoading},[D(a("i",ue,null,512),[[B,!l(d).isLoading]]),D(b(O,{name:"inline"},null,512),[[B,l(d).isLoading]])],8,ce)])):(s(),i("button",{key:2,type:"button",class:"btn btn-primary w-100 fs-8 fs-xxs-7",onClick:t[2]||(t[2]=z=>l(m)(e.product_id,1))},[R(" 加入購物車 "),me]))])]))}}},he=U(ve,[["__scopeId","data-v-4e2a6379"]]);export{P as L,he as P};
