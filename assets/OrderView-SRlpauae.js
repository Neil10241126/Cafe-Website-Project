import{b as ts,s as T,d as ls,o as os,e as as,f as b,h as _,j as I,i as s,w as F,v as d,X as O,l as e,N as m,O as r,t as a,x as p,F as R,p as ns,k as i,K as is,y as ds,z as rs,A as cs}from"./index-AxNh8ZF2.js";import{u as ms,a as ps}from"./useValidation-aYnRnY-G.js";import{u as us}from"./order-MXaUdugw.js";import{A as bs}from"./AdView-F1yMynL4.js";import{_ as _s}from"./plugin-vueexport-helper-x3n3nnut.js";const o=f=>(rs("data-v-e75e578e"),f=f(),cs(),f),fs={class:"container py-6"},hs={class:"nav justify-content-center align-items-center fs-8 mb-3"},vs={class:"nav-item"},xs=o(()=>s("li",null,"/",-1)),ys={class:"nav-item"},gs=o(()=>s("div",{class:"d-flex justify-content-center align-items-center"},[s("h2",{class:"fs-4 lh-sm fw-semibold text-gray-800 mb-0"},"填寫個人資訊"),s("i",{class:"bi bi-file-text fs-5 text-gray-800 ms-2"})],-1)),ws=ds('<div class="container d-flex justify-content-center" data-v-e75e578e><ul class="list-unstyled d-flex border border-2 border-primary px-3 px-md-4 py-4 mb-0" style="border-style:dashed !important;" data-v-e75e578e><li class="text-center border border-2 border-primary py-2 px-2 px-md-4" data-v-e75e578e><p class="fs-md-6 fw-seimbold text-primary mb-2" data-v-e75e578e>Step 1</p><p class="fs-md-6 fw-seimbold text-primary mb-0 text-nowrap" data-v-e75e578e>確認商品</p></li><li class="text-center bg-primary py-2 px-2 px-md-4 mx-3 mx-md-4" data-v-e75e578e><p class="fs-md-6 fw-seimbold text-light mb-2" data-v-e75e578e>Step 2</p><p class="fs-md-6 fw-seimbold text-light mb-0 text-nowrap" data-v-e75e578e>填寫訂單</p></li><li class="text-center border border-2 border-primary py-2 px-2 px-md-4" data-v-e75e578e><p class="fs-md-6 fw-seimbold text-primary mb-2" data-v-e75e578e>Step 3</p><p class="fs-md-6 fw-seimbold text-primary mb-0 text-nowrap" data-v-e75e578e>結帳付款</p></li></ul></div>',1),ks={class:"container py-8"},Ns={class:"row gy-5 justify-content-center"},Ss={class:"col-12 col-lg-4"},Vs={class:"input-wrap mb-5"},Is=o(()=>s("h3",{class:"fs-6 lh-base fw-bold text-gray-800 pb-4 mb-0"},"發票資訊",-1)),$s={class:"list-group flex-row"},js={class:"form-check form-check-inline"},As=o(()=>s("label",{class:"form-check-label fw-semibold",for:"bill"},"個人發票",-1)),Us={class:"form-check form-check-inline"},Cs=o(()=>s("label",{class:"form-check-label fw-semibold",for:"bill-number"},"公司統編",-1)),Ts={class:"fs-8 text-danger"},Fs={class:"tab-content"},Os=o(()=>s("div",{class:"tab-pane",id:"bills"},null,-1)),Rs={class:"tab-pane mt-4",id:"numbers"},Ls={class:"row"},Ms={class:"col"},Bs=o(()=>s("label",{for:"bill-name",class:"form-label fw-semibold"},[i(" 發票抬頭 "),s("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),Ds={class:"fs-8 text-danger"},Xs={class:"col"},qs=o(()=>s("label",{for:"bill-number",class:"form-label fw-semibold"},[i(" 統一編號 "),s("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),zs={class:"fs-8 text-danger"},Es={class:"input-wrap"},Ks=o(()=>s("h3",{class:"fs-6 lh-base fw-bold text-gray-800 pb-4 mb-0"},"訂單資訊",-1)),Ps={class:"row gy-4"},Gs={class:"col-12"},Hs=o(()=>s("label",{for:"name",class:"form-label fw-semibold"},[i(" 姓名 "),s("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),Js={class:"fs-8 text-danger"},Qs={class:"col-12"},Ws=o(()=>s("label",{for:"email",class:"form-label fw-semibold"},[i(" 電子郵件 "),s("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),Ys={class:"fs-8 text-danger"},Zs={class:"col-12"},se=o(()=>s("label",{for:"tel",class:"form-label fw-semibold"},[i(" 連絡電話 "),s("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),ee={class:"fs-8 text-danger"},te={class:"col-12"},le=o(()=>s("label",{for:"address",class:"form-label fw-semibold"},[i(" 收件地址 "),s("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),oe={class:"row g-2"},ae={class:"col-4"},ne={class:"fs-8 text-danger"},ie={class:"col-8"},de={class:"fs-8 text-danger"},re={class:"col-12"},ce=o(()=>s("label",{for:"textarea",class:"form-label fw-semibold"},[i(" 備註 "),s("span",{class:"fw-normal text-gray-600"},"(選填)")],-1)),me={class:"col-12 col-lg-4"},pe={class:"input-wrap mb-5"},ue=o(()=>s("h3",{class:"fs-6 lh-base fw-bold text-gray-800 border-bottom border-2 border-gray-800 pb-4 mb-0"}," 商品明細 ",-1)),be={class:"list-unstyled"},_e={class:"d-flex justify-content-between mb-1"},fe={class:"mb-0"},he={class:"mb-0"},ve={class:"mb-0"},xe={class:"input-wrap"},ye={class:"list-unstyled mb-0"},ge={class:"fs-6 fw-semibold text-gray-800 d-flex justify-content-between py-2"},we=o(()=>s("span",null,"品項",-1)),ke={class:"fs-6 fw-semibold text-gray-800 d-flex justify-content-between py-2"},Ne=o(()=>s("span",null,"小計",-1)),Se={class:"fs-6 fw-semibold text-gray-800 d-flex justify-content-between py-2"},Ve=o(()=>s("span",null,"折扣",-1)),Ie={class:"fs-6 fw-semibold text-gray-800 d-flex justify-content-between pt-2 pb-3"},$e=o(()=>s("span",null,"運費",-1)),je={class:"fs-5 fw-bold text-gray-800 border-top border-2 border-dark d-flex justify-content-between pt-3 pb-4"},Ae=o(()=>s("span",null,"總金額",-1)),Ue={class:"text-danger"},Ce={key:0,class:"mb-1"},Te={key:0,class:"text-danger"},Fe=o(()=>s("i",{class:"bi bi-exclamation-circle ms-!"},null,-1)),Oe={key:1,class:"text-success"},Re=o(()=>s("i",{class:"bi bi-check-circle ms-1"},null,-1)),Le=o(()=>s("i",{class:"bi bi-chevron-right ms-1"},null,-1)),Me={__name:"OrderView",setup(f){const L=ts(),{cartList:h,shipping:M,isShippingFree:B,subtotal:D,total:X}=T(L),q=us(),{submitOrder:z}=q,E=ls(),{user:y}=T(E),{orderSchema:K}=ms(),{handleSubmit:P,defineField:c,errors:n,meta:$}=ps({validationSchema:K}),[u,j]=c("user.billInfo.type"),[g,G]=c("user.billInfo.billName"),[w,H]=c("user.billInfo.billNumber"),[v,J]=c("user.name"),[x,Q]=c("user.email"),[k,W]=c("user.tel"),[N,Y]=c("user.postalCode"),[S,Z]=c("user.address"),[V]=c("message"),ss=P((A,{resetForm:l})=>{z(A),l()}),es=()=>{y.value.loginState&&(v.value=y.value.userInfo.name,x.value=y.value.userInfo.email)};return os(()=>{es()}),(A,l)=>{var C;const U=as("RouterLink");return b(),_(R,null,[I(bs),s("div",fs,[s("ul",hs,[s("li",vs,[I(U,{to:"/",class:"nav-link link-gray-800 text-decoration-underline link-offset-1 px-2 py-0"},{default:F(()=>[i(" 首頁 ")]),_:1})]),xs,s("li",ys,[I(U,{to:"#",class:"nav-link link-gray-800 px-2 py-0 disabled"},{default:F(()=>[i("填寫訂單")]),_:1})])]),gs]),ws,s("div",ks,[s("div",Ns,[s("div",Ss,[s("form",null,[s("div",Vs,[Is,s("div",$s,[s("div",js,[d(s("input",m({class:"form-check-input",type:"radio",name:"billInfo.type",id:"bill",value:"個人發票","data-bs-toggle":"list",href:"#bills","onUpdate:modelValue":l[0]||(l[0]=t=>r(u)?u.value=t:null)},e(j)),null,16),[[O,e(u)]]),As]),s("div",Us,[d(s("input",m({class:"form-check-input",type:"radio",name:"billInfo.type",id:"bill-number",value:"公司統編","data-bs-toggle":"list",href:"#numbers","onUpdate:modelValue":l[1]||(l[1]=t=>r(u)?u.value=t:null)},e(j)),null,16),[[O,e(u)]]),Cs]),s("span",Ts,a(e(n)["user.billInfo.type"]),1)]),s("div",Fs,[Os,s("div",Rs,[s("div",Ls,[s("div",Ms,[Bs,d(s("input",m({type:"text",class:["form-control",{"is-invalid":e(n)["user.billInfo.billName"]}],id:"bill-name",placeholder:"公司名稱","onUpdate:modelValue":l[2]||(l[2]=t=>r(g)?g.value=t:null)},e(G)),null,16),[[p,e(g)]]),s("span",Ds,a(e(n)["user.billInfo.billName"]),1)]),s("div",Xs,[qs,d(s("input",m({type:"tel",class:["form-control",{"is-invalid":e(n)["user.billInfo.billNumber"]}],id:"bill-number",placeholder:"統一編號為8位數字",maxlength:"8","onUpdate:modelValue":l[3]||(l[3]=t=>r(w)?w.value=t:null)},e(H)),null,16),[[p,e(w)]]),s("span",zs,a(e(n)["user.billInfo.billNumber"]),1)])])])])]),s("div",Es,[Ks,s("div",Ps,[s("div",Gs,[Hs,d(s("input",m({type:"text",class:["form-control",{"is-invalid":e(n)["user.name"]}],id:"name",placeholder:"請輸入您的姓名","onUpdate:modelValue":l[4]||(l[4]=t=>r(v)?v.value=t:null)},e(J)),null,16),[[p,e(v)]]),s("span",Js,a(e(n)["user.name"]),1)]),s("div",Qs,[Ws,d(s("input",m({type:"email",class:["form-control",{"is-invalid":e(n)["user.email"]}],id:"email",placeholder:"請輸入您的電子郵件","onUpdate:modelValue":l[5]||(l[5]=t=>r(x)?x.value=t:null)},e(Q)),null,16),[[p,e(x)]]),s("span",Ys,a(e(n)["user.email"]),1)]),s("div",Zs,[se,d(s("input",m({type:"tel",class:["form-control",{"is-invalid":e(n)["user.tel"]}],id:"tel",placeholder:"請輸入您的連絡電話","onUpdate:modelValue":l[6]||(l[6]=t=>r(k)?k.value=t:null)},e(W)),null,16),[[p,e(k)]]),s("span",ee,a(e(n)["user.tel"]),1)]),s("div",te,[le,s("div",oe,[s("div",ae,[d(s("input",m({type:"tel",class:["form-control",{"is-invalid":e(n)["user.postalCode"]}],id:"address",placeholder:"郵遞區號",maxlength:"3","onUpdate:modelValue":l[7]||(l[7]=t=>r(N)?N.value=t:null)},e(Y)),null,16),[[p,e(N)]]),s("span",ne,a(e(n)["user.postalCode"]),1)]),s("div",ie,[d(s("input",m({type:"text",class:["form-control",{"is-invalid":e(n)["user.address"]}],id:"address",placeholder:"請輸入您的收件地址","onUpdate:modelValue":l[8]||(l[8]=t=>r(S)?S.value=t:null)},e(Z)),null,16),[[p,e(S)]]),s("span",de,a(e(n)["user.address"]),1)])])]),s("div",re,[ce,d(s("textarea",{class:"form-control",id:"textarea",rows:"5",placeholder:"商品相關要求，是否需要磨豆等等 ~","onUpdate:modelValue":l[9]||(l[9]=t=>r(V)?V.value=t:null)},null,512),[[p,e(V)]])])])])])]),s("div",me,[s("div",pe,[ue,s("ul",be,[(b(!0),_(R,null,ns(e(h).carts,t=>(b(),_("li",{class:"fw-semibold text-gray-800 border-bottom border-dark py-3",key:t.id},[s("div",_e,[s("p",fe,a(t.product.title),1),s("p",he,a(`X${t.qty}`),1)]),s("p",ve,a(`NT$ ${t.product.price} / ${t.product.unit}`),1)]))),128))])]),s("div",xe,[s("ul",ye,[s("li",ge,[we,s("span",null,a(`${(C=e(h).carts)==null?void 0:C.length} 項`),1)]),s("li",ke,[Ne,s("span",null,a(`NT$ ${e(D)}`),1)]),s("li",Se,[Ve,s("span",null,a(`NT$ ${Math.round(e(h).total-e(h).final_total)}`),1)]),s("li",Ie,[$e,s("span",null,"NT$ "+a(e(B)?0:e(M)),1)]),s("li",je,[Ae,s("span",Ue,a(`NT$ ${e(X)}`),1)])]),e($).touched?(b(),_("div",Ce,[e($).valid?(b(),_("span",Oe,[i(" 欄位已完成 "),Re])):(b(),_("span",Te,[i(" 欄位未完成 "),Fe]))])):is("",!0),s("button",{type:"button",class:"btn btn-primary w-100",onClick:l[10]||(l[10]=t=>e(ss)())},[i(" 下一步 "),Le])])])])])],64)}}},Ee=_s(Me,[["__scopeId","data-v-e75e578e"]]);export{Ee as default};
