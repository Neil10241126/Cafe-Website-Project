import{M as st,u as at,v as ot,b as lt,s as nt,r as dt,o as rt,e as ct,f as i,h as p,j as S,i as t,w as q,F as A,p as D,x as m,X as T,l as s,N as u,O as _,t as l,y,k as r,K as it,q as pt,n as mt,z as ut,A as _t,V as ft}from"./index-sjxB57Q-.js";import{u as bt,a as ht}from"./useValidation-s9KukhLR.js";import{A as yt}from"./AdView-jT85vHzh.js";import{C as vt}from"./CanvasCard-bOFYMOFQ.js";import{_ as xt}from"./plugin-vueexport-helper-x3n3nnut.js";import"./AddButtonUi-NIOYagtZ.js";const o=v=>(ut("data-v-762fd5ed"),v=v(),_t(),v),gt={class:"container py-6"},wt={class:"nav justify-content-center align-items-center fs-8 mb-3"},kt={class:"nav-item"},Ct=o(()=>t("li",null,"/",-1)),Vt={class:"nav-item"},St=o(()=>t("div",{class:"d-flex justify-content-center align-items-center"},[t("h2",{class:"fs-4 lh-sm fw-semibold text-gray-800 mb-0"},"付款確認"),t("i",{class:"bi bi-credit-card fs-5 text-gray-800 ms-2"})],-1)),At=pt('<div class="container d-flex justify-content-center" data-v-762fd5ed><ul class="list-unstyled d-flex border border-2 border-primary px-3 px-md-4 py-4 mb-0" style="border-style:dashed !important;" data-v-762fd5ed><li class="text-center border border-2 border-primary py-2 px-2 px-md-4" data-v-762fd5ed><p class="fs-md-6 fw-seimbold text-primary mb-2" data-v-762fd5ed>Step 1</p><p class="fs-md-6 fw-seimbold text-primary mb-0 text-nowrap" data-v-762fd5ed>確認商品</p></li><li class="text-center border border-2 border-primary py-2 px-2 px-md-4 mx-3 mx-md-4" data-v-762fd5ed><p class="fs-md-6 fw-seimbold text-primary mb-2" data-v-762fd5ed>Step 2</p><p class="fs-md-6 fw-seimbold text-primary mb-0 text-nowrap" data-v-762fd5ed>填寫訂單</p></li><li class="text-center bg-primary py-2 px-2 px-md-4" data-v-762fd5ed><p class="fs-md-6 fw-seimbold text-light mb-2" data-v-762fd5ed>Step 3</p><p class="fs-md-6 fw-seimbold text-light mb-0 text-nowrap" data-v-762fd5ed>結帳付款</p></li></ul></div>',1),jt={class:"container py-8"},Nt={class:"row justify-content-center d-none d-md-flex mb-5"},Rt={class:"col-12 col-lg-8"},Ut={class:"p-5 bg-secondary-light rounded",style:{"box-shadow":"0 4px 4px rgba(0, 0, 0, 0.25)"}},It={class:"table align-middle table-primary text-center"},$t=o(()=>t("thead",{class:"fs-6"},[t("tr",null,[t("th",null,"商品"),t("th",null,"品項"),t("th",null,"數量"),t("th",null,"價格")])],-1)),Mt=["src"],qt={class:"text-gray-800 mb-1"},Dt={class:"fs-8 text-gray-600"},Tt={class:"fw-semibold"},Bt={class:"d-md-none mb-5"},Ft={class:"row justify-content-center gy-5"},Lt={class:"col-12 col-lg-4"},Ot={class:"input-wrap"},Pt=o(()=>t("h3",{class:"fs-6 lh-base fw-bold text-gray-800 pb-4 mb-0"},"付款方式",-1)),Et={class:"list-group flex-row"},Xt={class:"form-check form-check-inline"},zt=o(()=>t("label",{class:"form-check-label fw-semibold",for:"creditCard"},"信用卡",-1)),Kt={class:"form-check form-check-inline"},Gt=o(()=>t("label",{class:"form-check-label fw-semibold",for:"cost"},"貨到付款",-1)),Ht={class:"fs-8 text-danger"},Jt={class:"tab-content"},Qt={class:"tab-pane mt-4",id:"credit-list"},Wt={class:"mb-4"},Yt=o(()=>t("label",{for:"credit-name",class:"form-label fw-semibold"},[r(" 持卡人姓名 "),t("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),Zt={class:"fs-8 text-danger"},te={class:"mb-4"},ee=o(()=>t("label",{for:"credit-number",class:"form-label fw-semibold"},[r(" 信用卡號碼 "),t("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),se={class:"fs-8 text-danger"},ae={class:"row gx-2 gx-md-4"},oe={class:"col-4"},le=o(()=>t("label",{for:"credit-month",class:"form-label fw-semibold"},[r(" 期限 "),t("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),ne={class:"fs-8 text-danger"},de={class:"col-4"},re=o(()=>t("label",{for:"credit-month",class:"form-label invisible"},[t("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),ce={class:"fs-8 text-danger"},ie={class:"col-4"},pe=o(()=>t("label",{for:"credit-cvv",class:"form-label fw-semibold"},[r(" 安全碼 "),t("span",{class:"text-danger fs-6 align-bottom"},"⁎")],-1)),me={class:"fs-8 text-danger"},ue=o(()=>t("div",{class:"tab-pane",id:"cost-list"},null,-1)),_e={class:"col-12 col-lg-4"},fe={class:"input-wrap"},be={class:"list-unstyled mb-0"},he={class:"fs-6 text-gray-800 d-flex justify-content-between py-2"},ye=o(()=>t("span",{class:"fw-semibold text-nowrap me-4"},"姓名",-1)),ve={class:"fs-6 text-gray-800 d-flex justify-content-between py-2"},xe=o(()=>t("span",{class:"fw-semibold text-nowrap me-4"},"電話",-1)),ge={class:"fs-6 text-gray-800 d-flex justify-content-between py-2"},we=o(()=>t("span",{class:"fw-semibold text-nowrap me-4"},"電子郵件",-1)),ke={class:"text-break text-end"},Ce={class:"fs-6 text-gray-800 d-flex justify-content-between pt-2 pb-3"},Ve=o(()=>t("span",{class:"fw-semibold text-nowrap me-4"},"收件地址",-1)),Se={class:"text-end text-wrap"},Ae={class:"fs-5 fw-bold text-gray-800 border-top border-2 border-dark d-flex justify-content-between pt-3 pb-4"},je=o(()=>t("span",null,"總金額",-1)),Ne={class:"text-danger"},Re={key:0,class:"mb-1"},Ue={key:0,class:"text-danger"},Ie=o(()=>t("i",{class:"bi bi-exclamation-circle ms-!"},null,-1)),$e={key:1,class:"text-success"},Me=o(()=>t("i",{class:"bi bi-check-circle ms-1"},null,-1)),qe=o(()=>t("i",{class:"bi bi-chevron-right ms-1"},null,-1)),De={__name:"PaymentView",setup(v){const g=st(),B=at(),F=ot(),{apiResAlert:L,apiErrAlert:j}=F,O=lt(),{Round:P}=nt(O),{fetchOrder:E,fetchCheckout:X}=ft(),c=dt({});function z(){E(g.params.orderId).then(d=>{c.value=d.data.order}).catch(d=>j(d.response.data.message))}function K(){X(g.params.orderId).then(d=>{L(d.data.message),B.push(`/checkout/${g.params.orderId}`)}).catch(d=>j(d.response.data.message))}rt(()=>{z()});const{paymentSchema:G}=bt(),{handleSubmit:H,defineField:f,errors:n,meta:N}=ht({validationSchema:G}),[b,R]=f("payment.type"),[w,J]=f("payment.creditCard.name"),[x,Q]=f("payment.creditCard.number"),[k,W]=f("payment.creditCard.month"),[C,Y]=f("payment.creditCard.day"),[V,Z]=f("payment.creditCard.cvv"),tt=H(()=>{K()});function et(d){let a=d.target.value.replace(/\D/g,"");a.length>16&&(a=a.slice(0,16));const h=a.replace(/(\d{4})(?=\d)/g,"$1 ");d.target.value=h,x.value=h}return(d,a)=>{var U,I,$,M;const h=ct("RouterLink");return i(),p(A,null,[S(yt),t("div",gt,[t("ul",wt,[t("li",kt,[S(h,{to:"/",class:"nav-link link-gray-800 text-decoration-underline link-offset-1 px-2 py-0"},{default:q(()=>[r(" 首頁 ")]),_:1})]),Ct,t("li",Vt,[S(h,{to:"#",class:"nav-link link-gray-800 px-2 py-0 disabled"},{default:q(()=>[r("結帳")]),_:1})])]),St]),At,t("div",jt,[t("div",Nt,[t("div",Rt,[t("div",Ut,[t("table",It,[$t,t("tbody",null,[(i(!0),p(A,null,D(c.value.products,e=>(i(),p("tr",{key:e.id},[t("td",null,[t("img",{src:e.product.imageUrl,class:"mx-auto my-2",alt:"",width:"100"},null,8,Mt)]),t("td",null,[t("p",qt,l(e.product.title),1),t("span",Dt,l(e.product.content),1)]),t("td",null,l(`X${e.qty}`),1),t("td",Tt,l(`NT$ ${e.total}`),1)]))),128))])])])])]),t("div",Bt,[(i(!0),p(A,null,D(c.value.products,e=>(i(),mt(vt,{class:"mb-3",editor:!1,key:e.id,title:e.product.title,price:e.total,qty:e.qty,img_url:e.product.imageUrl,content:e.product.content},null,8,["title","price","qty","img_url","content"]))),128))]),t("div",Ft,[t("div",Lt,[t("div",Ot,[Pt,t("div",Et,[t("div",Xt,[m(t("input",u({class:"form-check-input",type:"radio",name:"payment",id:"creditCard",value:"信用卡","data-bs-toggle":"list",href:"#credit-list","onUpdate:modelValue":a[0]||(a[0]=e=>_(b)?b.value=e:null)},s(R)),null,16),[[T,s(b)]]),zt]),t("div",Kt,[m(t("input",u({class:"form-check-input",type:"radio",name:"payment",id:"cost",value:"貨到付款","data-bs-toggle":"list",href:"#cost-list","onUpdate:modelValue":a[1]||(a[1]=e=>_(b)?b.value=e:null)},s(R)),null,16),[[T,s(b)]]),Gt]),t("span",Ht,l(s(n)["payment.type"]),1)]),t("div",Jt,[t("div",Qt,[t("div",Wt,[Yt,m(t("input",u({type:"text",class:["form-control",{"is-invalid":s(n)["payment.creditCard.name"]}],id:"credit-name",placeholder:"請輸入持卡本人姓名","onUpdate:modelValue":a[2]||(a[2]=e=>_(w)?w.value=e:null)},s(J)),null,16),[[y,s(w)]]),t("span",Zt,l(s(n)["payment.creditCard.name"]),1)]),t("div",te,[ee,m(t("input",u({type:"tel",class:["form-control",{"is-invalid":s(n)["payment.creditCard.number"]}],id:"credit-number",placeholder:"請輸入卡片16位號碼","onUpdate:modelValue":a[3]||(a[3]=e=>_(x)?x.value=e:null)},s(Q),{onInput:a[4]||(a[4]=e=>et(e))}),null,16),[[y,s(x)]]),t("span",se,l(s(n)["payment.creditCard.number"]),1)]),t("div",ae,[t("div",oe,[le,m(t("input",u({type:"tel",class:["form-control",{"is-invalid":s(n)["payment.creditCard.month"]}],id:"credit-month",placeholder:"MM",maxlength:"2","onUpdate:modelValue":a[5]||(a[5]=e=>_(k)?k.value=e:null)},s(W)),null,16),[[y,s(k)]]),t("span",ne,l(s(n)["payment.creditCard.month"]),1)]),t("div",de,[re,m(t("input",u({type:"tel",class:["form-control",{"is-invalid":s(n)["payment.creditCard.day"]}],id:"credit-month",placeholder:"DD",maxlength:"2","onUpdate:modelValue":a[6]||(a[6]=e=>_(C)?C.value=e:null)},s(Y)),null,16),[[y,s(C)]]),t("span",ce,l(s(n)["payment.creditCard.day"]),1)]),t("div",ie,[pe,m(t("input",u({type:"tel",class:["form-control",{"is-invalid":s(n)["payment.creditCard.cvv"]}],id:"credit-cvv",placeholder:"CVV",maxlength:"3","onUpdate:modelValue":a[7]||(a[7]=e=>_(V)?V.value=e:null)},s(Z)),null,16),[[y,s(V)]]),t("span",me,l(s(n)["payment.creditCard.cvv"]),1)])])]),ue])])]),t("div",_e,[t("div",fe,[t("ul",be,[t("li",he,[ye,t("span",null,l((U=c.value.user)==null?void 0:U.name),1)]),t("li",ve,[xe,t("span",null,l((I=c.value.user)==null?void 0:I.tel),1)]),t("li",ge,[we,t("span",ke,l(($=c.value.user)==null?void 0:$.email),1)]),t("li",Ce,[Ve,t("span",Se,l((M=c.value.user)==null?void 0:M.address),1)]),t("li",Ae,[je,t("span",Ne,l(`NT$ ${s(P)(c.value.total)}`),1)])]),s(N).touched?(i(),p("div",Re,[s(N).valid?(i(),p("span",$e,[r(" 欄位已完成 "),Me])):(i(),p("span",Ue,[r(" 欄位未完成 "),Ie]))])):it("",!0),t("button",{type:"button",class:"btn btn-primary w-100",onClick:a[8]||(a[8]=e=>s(tt)())},[r(" 確認付款 "),qe])])])])])],64)}}},Ee=xt(De,[["__scopeId","data-v-762fd5ed"]]);export{Ee as default};
