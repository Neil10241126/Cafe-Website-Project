import{_ as r}from"./icons-ZEDulI2G.js";import{M}from"./modal-ih7QJ14p.js";import{_ as N}from"./LoadingUi-VoE95F66.js";import{k as S,D as V,l as c,E as B,z as E,o,c as l,e as j,d as t,f as z,F as m,j as x,I as g,n as I,t as i,N as T}from"./index-0vNyyRQc.js";const P=r+"#trash3",R=r+"#check-circle",Y=r+"#x-circle",q=r+"#dots-vertical",G={class:"row"},H={class:"col-8"},J={class:"card shadow"},K={class:"card-header d-flex justify-content-between align-items-center py-3"},Q=t("h5",{class:"fs-6"},"訂單清單",-1),U=t("svg",{width:"16",height:"16",class:"ms-1"},[t("use",{"xlink:href":P})],-1),W={class:"card-body"},X={class:"table table-hover table-striped"},Z=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"客戶姓名"),t("th",{scope:"col"},"訂單ID"),t("th",{scope:"col",class:"text-end"},"生成時間(time)"),t("th",{scope:"col",class:"text-end"},"是否付款"),t("th",{scope:"col",class:"text-end"},"總金額(NTD)"),t("th",{scope:"col",class:"text-end"})])],-1),tt={class:"align-middle"},et={scope:"row"},st={class:"text-end"},at={class:"text-end"},nt={width:"20",height:"20"},ot={key:0,"xlink:href":R,class:"text-success"},lt={key:1,"xlink:href":Y,class:"text-danger"},dt={class:"text-end"},it={class:"text-end"},ct=["onClick"],rt=t("svg",{width:"18",height:"18",class:"text-netural-900"},[t("use",{"xlink:href":q})],-1),_t=[rt],ut={"aria-label":"Page navigation example"},ht={class:"pagination"},pt=t("span",{"aria-hidden":"true"},"«",-1),mt=[pt],gt=["onClick","disabled"],bt=t("span",{"aria-hidden":"true"},"»",-1),ft=[bt],vt=t("div",{class:"col-4"},null,-1),yt={class:"modal-dialog"},xt={class:"modal-content","data-bs-theme":"dark"},kt=I('<div class="modal-header bg-danger text-netural-100 py-3"><h1 class="modal-title fs-6">刪除全部訂單</h1><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body py-4 fs-6"> 確認刪除<span class="text-bg-danger mx-1 px-1 rounded-1">全部訂單</span> ? </div>',2),wt={class:"modal-footer bg-danger"},Dt=t("button",{type:"button",class:"btn btn-outline-netural-100","data-bs-dismiss":"modal"}," 取消 ",-1),Ft={__name:"AdminOrders",setup(Ot){const k=S(),{apiResAlert:b,apiErrAlert:_}=k,w=V(),{isLoadingOn:u,isLoadingOff:h}=w,{fetchAdminOrders:D,fetchDelAdminOrder:O,fetchDelAdminOrderAll:A}=T(),f=c({}),n=c({}),L=B(()=>a=>{const e=new Date(a).getFullYear(),s=new Date(a).getMonth()+1,p=new Date(a).getDay()+1;return`${e}/${s}/${p}`});async function d(a=1){u("isFullLoading");try{const e=await D(a);f.value=e.data.orders,n.value=e.data.pagination}catch(e){_(e.response.data.message)}finally{h("isFullLoading")}}async function $(a){u("isFullLoading");try{const e=await O(a);await d(),b(e.data.message)}catch(e){_(e.response.data.message)}finally{h("isFullLoading")}}async function C(){u("isFullLoading");try{const a=await A();await d(),b(a.data.message)}catch(a){_(a.response.data.message)}finally{h("isFullLoading")}}const v=c(null),y=c("");function F(){y.value.show()}return E(()=>{y.value=new M(v.value),d()}),(a,e)=>(o(),l(m,null,[j(N),t("div",G,[t("div",H,[t("div",J,[t("div",K,[Q,t("button",{type:"button",class:"btn btn-sm btn-danger rounded-0 d-flex align-items-center",onClick:e[0]||(e[0]=s=>F())},[z(" 全部刪除 "),U])]),t("div",W,[t("table",X,[Z,t("tbody",tt,[(o(!0),l(m,null,x(f.value,s=>(o(),l("tr",{key:s.id},[t("th",et,i(s.user.name),1),t("td",null,i(s.id),1),t("td",st,i(L.value(s.create_at)),1),t("td",at,[(o(),l("svg",nt,[s.is_paid?(o(),l("use",ot)):(o(),l("use",lt))]))]),t("td",dt,i(s.total),1),t("td",it,[t("button",{type:"button",class:"btn btn-sm d-flex p-0",onClick:p=>$(s.id)},_t,8,ct)])]))),128))])]),t("nav",ut,[t("ul",ht,[t("li",{class:g(["page-item",{"d-none":n.value.has_pre===!1}])},[t("button",{type:"button",class:"page-link",onClick:e[1]||(e[1]=s=>d(n.value.current_page-1))},mt)],2),(o(!0),l(m,null,x(n.value.total_pages,s=>(o(),l("li",{key:s+123,class:g(["page-item",{active:n.value.current_page===s}])},[t("button",{class:"page-link",type:"button",onClick:p=>d(s),disabled:n.value.current_page===s},i(s),9,gt)],2))),128)),t("li",{class:g(["page-item",{"d-none":n.value.has_next===!1}])},[t("button",{type:"button",class:"page-link",onClick:e[2]||(e[2]=s=>d(n.value.current_page+1))},ft)],2)])])])])]),vt]),t("div",{class:"modal fade",id:"exampleModal",ref_key:"refDeleteOrderModal",ref:v},[t("div",yt,[t("div",xt,[kt,t("div",wt,[Dt,t("button",{type:"button",class:"btn btn-netural-900",onClick:e[3]||(e[3]=s=>C())}," 確認刪除 ")])])])],512)],64))}};export{Ft as default};
