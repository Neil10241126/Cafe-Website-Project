import{_ as r}from"./icons-0uk2oKV3.js";import{M}from"./modal-s9aH-1df.js";import{_ as N}from"./LoadingUi-fwIMZ-EB.js";import{q as S,I as V,r as c,J as B,o as j,f as o,h as l,j as E,i as t,k as I,F as m,p as x,H as g,y as T,t as i,Q as q}from"./index-wWN1c4sg.js";import"./selector-engine-2-JLEvj0.js";const z=r+"#trash3",H=r+"#check-circle",J=r+"#x-circle",P=r+"#dots-vertical",Q={class:"row"},R={class:"col-8"},Y={class:"card shadow"},G={class:"card-header d-flex justify-content-between align-items-center py-3"},K=t("h5",{class:"fs-6"},"訂單清單",-1),U=t("svg",{width:"16",height:"16",class:"ms-1"},[t("use",{"xlink:href":z})],-1),W={class:"card-body"},X={class:"table table-hover table-striped"},Z=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"客戶姓名"),t("th",{scope:"col"},"訂單ID"),t("th",{scope:"col",class:"text-end"},"生成時間(time)"),t("th",{scope:"col",class:"text-end"},"是否付款"),t("th",{scope:"col",class:"text-end"},"總金額(NTD)"),t("th",{scope:"col",class:"text-end"})])],-1),tt={class:"align-middle"},et={scope:"row"},st={class:"text-end"},at={class:"text-end"},nt={width:"20",height:"20"},ot={key:0,"xlink:href":H,class:"text-success"},lt={key:1,"xlink:href":J,class:"text-danger"},dt={class:"text-end"},it={class:"text-end"},ct=["onClick"],rt=t("svg",{width:"18",height:"18",class:"text-netural-900"},[t("use",{"xlink:href":P})],-1),_t=[rt],ut={"aria-label":"Page navigation example"},ht={class:"pagination"},pt=t("span",{"aria-hidden":"true"},"«",-1),mt=[pt],gt=["onClick","disabled"],bt=t("span",{"aria-hidden":"true"},"»",-1),ft=[bt],vt=t("div",{class:"col-4"},null,-1),yt={class:"modal-dialog"},xt={class:"modal-content","data-bs-theme":"dark"},kt=T('<div class="modal-header bg-danger text-netural-100 py-3"><h1 class="modal-title fs-6">刪除全部訂單</h1><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body py-4 fs-6"> 確認刪除<span class="text-bg-danger mx-1 px-1 rounded-1">全部訂單</span> ? </div>',2),wt={class:"modal-footer bg-danger"},Ot=t("button",{type:"button",class:"btn btn-outline-netural-100","data-bs-dismiss":"modal"}," 取消 ",-1),Mt={__name:"AdminOrders",setup(Dt){const k=S(),{apiResAlert:b,apiErrAlert:_}=k,w=V(),{isLoadingOn:u,isLoadingOff:h}=w,{fetchAdminOrders:O,fetchDelAdminOrder:D,fetchDelAdminOrderAll:A}=q(),f=c({}),n=c({}),L=B(()=>a=>{const e=new Date(a).getFullYear(),s=new Date(a).getMonth()+1,p=new Date(a).getDay()+1;return`${e}/${s}/${p}`});async function d(a=1){u("isFullLoading");try{const e=await O(a);f.value=e.data.orders,n.value=e.data.pagination}catch(e){_(e.response.data.message)}finally{h("isFullLoading")}}async function $(a){u("isFullLoading");try{const e=await D(a);await d(),b(e.data.message)}catch(e){_(e.response.data.message)}finally{h("isFullLoading")}}async function C(){u("isFullLoading");try{const a=await A();await d(),b(a.data.message)}catch(a){_(a.response.data.message)}finally{h("isFullLoading")}}const v=c(null),y=c("");function F(){y.value.show()}return j(()=>{y.value=new M(v.value),d()}),(a,e)=>(o(),l(m,null,[E(N),t("div",Q,[t("div",R,[t("div",Y,[t("div",G,[K,t("button",{type:"button",class:"btn btn-sm btn-danger rounded-0 d-flex align-items-center",onClick:e[0]||(e[0]=s=>F())},[I(" 全部刪除 "),U])]),t("div",W,[t("table",X,[Z,t("tbody",tt,[(o(!0),l(m,null,x(f.value,s=>(o(),l("tr",{key:s.id},[t("th",et,i(s.user.name),1),t("td",null,i(s.id),1),t("td",st,i(L.value(s.create_at)),1),t("td",at,[(o(),l("svg",nt,[s.is_paid?(o(),l("use",ot)):(o(),l("use",lt))]))]),t("td",dt,i(s.total),1),t("td",it,[t("button",{type:"button",class:"btn btn-sm d-flex p-0",onClick:p=>$(s.id)},_t,8,ct)])]))),128))])]),t("nav",ut,[t("ul",ht,[t("li",{class:g(["page-item",{"d-none":n.value.has_pre===!1}])},[t("button",{type:"button",class:"page-link",onClick:e[1]||(e[1]=s=>d(n.value.current_page-1))},mt)],2),(o(!0),l(m,null,x(n.value.total_pages,s=>(o(),l("li",{key:s+123,class:g(["page-item",{active:n.value.current_page===s}])},[t("button",{class:"page-link",type:"button",onClick:p=>d(s),disabled:n.value.current_page===s},i(s),9,gt)],2))),128)),t("li",{class:g(["page-item",{"d-none":n.value.has_next===!1}])},[t("button",{type:"button",class:"page-link",onClick:e[2]||(e[2]=s=>d(n.value.current_page+1))},ft)],2)])])])])]),vt]),t("div",{class:"modal fade",id:"exampleModal",ref_key:"refDeleteOrderModal",ref:v},[t("div",yt,[t("div",xt,[kt,t("div",wt,[Ot,t("button",{type:"button",class:"btn btn-netural-900",onClick:e[3]||(e[3]=s=>C())}," 確認刪除 ")])])])],512)],64))}};export{Mt as default};
