import{r as I,f as k,h as w,i as s,v as m,L as ls,H as U,m as j,z as H,A as J,o as as,k as p,t as d,l as t,x as b,N as f,O as v,$ as ns,j as is,F as cs,Q as ds}from"./index-PEMABB9d.js";import{_ as $}from"./icons-P9OnizTI.js";import{u as rs,a as us}from"./useValidation-Wmj9ZJCK.js";import{M as ps}from"./modal-boMazN-c.js";import{_ as Q}from"./plugin-vueexport-helper-x3n3nnut.js";import"./selector-engine-mmw3_0Ih.js";const W=r=>(H("data-v-0d2f203b"),r=r(),J(),r),ms=$+"#plus",_s=$+"#trash3",hs={width:"36",height:"36",class:"img-icons"},fs=W(()=>s("use",{"xlink:href":ms},null,-1)),vs=[fs],gs={class:"tool-list"},bs=W(()=>s("svg",{width:"24",height:"24"},[s("use",{"xlink:href":_s})],-1)),xs=[bs],ys={__name:"UploaderUi",emits:["sendImgData"],setup(r,{emit:D}){const u=I(null),x=I(null),i=I({isUploaded:!1,link:"",name:"",size:0,type:"",data:{}}),c=D;function z(){if(u.value.files.length){const{name:a,size:e,type:_}=u.value.files[0];i.value={isUploaded:!0,link:URL.createObjectURL(u.value.files[0]),name:a,size:e,type:_.split("/").pop(),data:u.value.files[0]},x.value.style.backgroundImage=`url(${i.value.link})`}}function V(a){const{type:e}=a.dataTransfer.files[0];e.split("/").shift()==="image"&&(u.value.files=a.dataTransfer.files,z())}function M(){u.value={},i.value={isUploaded:!1,link:"",name:"",size:0,type:"",data:{}},x.value.style.backgroundImage=""}function P(){c("sendImgData",i)}return P(),(a,e)=>(k(),w("label",{for:"file-input",class:U(["drop-area",[{"border-netural-800":i.value.isUploaded},{show:i.value.isUploaded}]]),onDrop:e[2]||(e[2]=j(_=>V(_),["prevent"])),onDragover:e[3]||(e[3]=j(()=>{},["prevent"]))},[s("input",{type:"file",id:"file-input",accept:"image/jpeg, image/png, image/webp",hidden:"",ref_key:"fileInput",ref:u,onChange:e[0]||(e[0]=_=>z())},null,544),s("div",{class:"img-view",ref_key:"imgView",ref:x},[m((k(),w("svg",hs,vs,512)),[[ls,!i.value.isUploaded]]),s("div",{class:U(["tool",{show:i.value.isUploaded}])},[s("div",gs,[s("a",{href:"#",class:"tool-icon",onClick:e[1]||(e[1]=j(_=>M(),["prevent"]))},xs)])],2)],512)],34))}},ks=Q(ys,[["__scopeId","data-v-0d2f203b"]]),n=r=>(H("data-v-2fcf0d7a"),r=r(),J(),r),ws=$+"#check-circle",Us=$+"#box-arrow-up-right",Is=$+"#file-text",$s=$+"#image",Vs={class:"card"},zs=n(()=>s("div",{class:"card-header"},"Featured",-1)),Ds={class:"card-body"},Ms={class:"table"},Ps=n(()=>s("thead",null,[s("tr",null,[s("th",{scope:"col"},"商品標題"),s("th",{scope:"col",class:"text-end"},"類別"),s("th",{scope:"col",class:"text-end"},"售價(NTD)"),s("th",{scope:"col",class:"text-end"},"是否啟用"),s("th",{scope:"col",class:"text-end"},"功能")])],-1)),Ss={class:"align-middle"},As=n(()=>s("th",{scope:"row"},"1",-1)),Bs=n(()=>s("td",{class:"text-end"},[s("span",{class:"badge rounded-pill text-bg-primary py-2 fw-normal"},"淺烘焙")],-1)),Es=n(()=>s("td",{class:"text-end"},"399",-1)),Fs={class:"text-end"},Ts={width:"20",height:"20"},Cs={key:0,"xlink:href":ws,class:"text-success"},Ns={class:"text-end"},js=n(()=>s("svg",{width:"16",height:"16",class:"d-flex"},[s("use",{"xlink:href":Us})],-1)),Ls=[js],Rs={class:"modal-dialog"},Gs={class:"modal-content","data-bs-theme":"dark"},Ks=n(()=>s("div",{class:"modal-header bg-netural-800 text-netural-100"},[s("h1",{class:"modal-title fs-5"},"新增商品"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),Os={class:"modal-body","data-bs-theme":"light"},Hs=n(()=>s("div",{class:"list-group d-inline-flex flex-row"},[s("a",{href:"#list-content",class:"list-group-item list-group-item-action d-flex align-items-center active","data-bs-toggle":"list"},[s("svg",{width:"18",height:"18"},[s("use",{"xlink:href":Is})]),s("span",{class:"text-nowrap ms-2"},"內容")]),s("a",{href:"#list-images",class:"list-group-item list-group-item-action d-flex align-items-center","data-bs-toggle":"list"},[s("svg",{width:"18",height:"18"},[s("use",{"xlink:href":$s})]),s("span",{class:"text-nowrap ms-2"},"圖片")])],-1)),Js={class:"tab-content"},Qs={class:"tab-pane fade show active p-3 border",id:"list-content"},Ws={action:"#"},qs={class:"row gx-3 mb-3"},Xs={class:"col-8"},Ys={for:"title",class:"form-label fs-8"},Zs={class:"text-danger ms-1"},st={class:"col-4"},tt={for:"category",class:"form-label fs-8"},et={class:"text-danger ms-1"},ot={class:"row gx-3 mb-3"},lt={class:"col-4"},at={for:"origin-price",class:"form-label fs-8"},nt={class:"text-danger ms-1"},it={class:"col-4"},ct={for:"price",class:"form-label fs-8"},dt={class:"text-danger ms-1"},rt={class:"col-4"},ut={for:"unit",class:"form-label fs-8"},pt={class:"text-danger ms-1"},mt={class:"mb-3"},_t={for:"content",class:"form-label fs-8"},ht={class:"text-danger ms-1"},ft={class:"mb-3"},vt={for:"description",class:"form-label fs-8"},gt={class:"text-danger ms-1"},bt={class:"form-check form-switch"},xt=n(()=>s("label",{class:"form-check-label fs-8",for:"isEnable"},"是否啟用",-1)),yt={class:"tab-pane fade p-3 border",id:"list-images"},kt={class:"row"},wt={class:"col-3"},Ut=n(()=>s("label",{class:"form-label fs-8"},"主要圖片",-1)),It={class:"col-9"},$t={class:"d-flex flex-column h-100"},Vt={class:"fs-8 lh-base mb-2"},zt={class:"mb-1"},Dt=n(()=>s("p",{class:"fs-8 text-muted"},"限制 : 圖片檔案不可大於 3MB",-1)),Mt=n(()=>s("span",null,null,-1)),Pt={class:"mt-auto d-flex justify-content-between"},St={class:"me-2"},At={width:"16",height:"16"},Bt=["xlink:href"],Et=n(()=>s("div",{class:"spinner-border spinner-grow-sm ms-1",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),Ft=n(()=>s("div",{class:"modal-footer bg-netural-800"},[s("button",{type:"button",class:"btn btn-outline-netural-300","data-bs-dismiss":"modal"}," 關閉 "),s("button",{type:"button",class:"btn btn-success"},"儲存")],-1)),Tt={__name:"AdminProducts",setup(r){const{addProductSchema:D}=rs(),{fetchUpload:u}=ds(),x=I(null),i=I(""),c=I({isUploaded:!1,link:"",name:"",size:0,type:"",data:{}});function z(g){c.value=g}function V(g){let o=0;const h=g>3145728,y=g/1024;return y>1e3?o=`${(y/1024).toFixed(2)} MB`:o=`${y.toFixed(2)} KB`,{value:o,checkSize:h}}function M(){const{data:g}=c.value.value,o=new FormData;o.append("file-to-upload",g),u(o).then(h=>console.log("fetch res: ",h)).catch(h=>console.log("fetch err: ",h))}const P=()=>i.value.show();as(()=>{i.value=new ps(x.value),i.value.show()});const{defineField:a,errors:e,values:_}=us({validationSchema:D}),[S,q]=a("title"),[A,X]=a("category"),[B,Y]=a("originPrice"),[E,Z]=a("price"),[F,ss]=a("unit"),[T,ts]=a("content"),[C,es]=a("desc"),[N,os]=a("isEnabled");return(g,o)=>{var h,y,L,R,G,K,O;return k(),w(cs,null,[s("div",Vs,[zs,s("div",Ds,[s("table",Ms,[Ps,s("tbody",Ss,[s("tr",null,[As,Bs,Es,s("td",Fs,[(k(),w("svg",Ts,[(k(),w("use",Cs))]))]),s("td",Ns,[s("button",{type:"button",class:"btn btn-netural-800 rounded-1 py-1 px-2",onClick:o[0]||(o[0]=l=>P())},Ls)])])])])])]),s("div",{class:"modal fade",id:"productModal",ref_key:"productModal",ref:x},[s("div",Rs,[s("div",Gs,[Ks,s("div",Os,[Hs,s("div",Js,[s("div",Qs,[s("form",Ws,[s("div",qs,[s("div",Xs,[s("label",Ys,[p("商品標題"),s("span",Zs,d(t(e).title),1)]),m(s("input",f({type:"text",class:["form-control form-control-sm",{"is-invalid":t(e).title}],id:"title",placeholder:"請輸入商品標題","onUpdate:modelValue":o[1]||(o[1]=l=>v(S)?S.value=l:null)},t(q)),null,16),[[b,t(S)]])]),s("div",st,[s("label",tt,[p("類別"),s("span",et,d(t(e).category),1)]),m(s("input",f({type:"text",class:["form-control form-control-sm",{"is-invalid":t(e).category}],id:"category",placeholder:"請輸入類別","onUpdate:modelValue":o[2]||(o[2]=l=>v(A)?A.value=l:null)},t(X)),null,16),[[b,t(A)]])])]),s("div",ot,[s("div",lt,[s("label",at,[p("原價"),s("span",nt,d(t(e).originPrice),1)]),m(s("input",f({type:"number",class:["form-control form-control-sm",{"is-invalid":t(e).originPrice}],id:"origin-price",placeholder:"請輸入原價","onUpdate:modelValue":o[3]||(o[3]=l=>v(B)?B.value=l:null)},t(Y)),null,16),[[b,t(B)]])]),s("div",it,[s("label",ct,[p("售價"),s("span",dt,d(t(e).price),1)]),m(s("input",f({type:"number",class:["form-control form-control-sm",{"is-invalid":t(e).price}],id:"price",placeholder:"請輸入售價","onUpdate:modelValue":o[4]||(o[4]=l=>v(E)?E.value=l:null)},t(Z)),null,16),[[b,t(E)]])]),s("div",rt,[s("label",ut,[p("單位"),s("span",pt,d(t(e).unit),1)]),m(s("input",f({type:"text",class:["form-control form-control-sm",{"is-invalid":t(e).unit}],id:"unit",placeholder:"請輸入單位","onUpdate:modelValue":o[5]||(o[5]=l=>v(F)?F.value=l:null)},t(ss)),null,16),[[b,t(F)]])])]),s("div",mt,[s("label",_t,[p("內容"),s("span",ht,d(t(e).content),1)]),m(s("input",f({type:"text",class:["form-control form-control-sm",{"is-invalid":t(e).content}],id:"content",placeholder:"請輸入商品內容","onUpdate:modelValue":o[6]||(o[6]=l=>v(T)?T.value=l:null)},t(ts)),null,16),[[b,t(T)]])]),s("div",ft,[s("label",vt,[p("描述"),s("span",gt,d(t(e).desc),1)]),m(s("textarea",f({class:["form-control form-control-sm",{"is-invalid":t(e).desc}],id:"description",rows:"3",placeholder:"請輸入商品描述","onUpdate:modelValue":o[7]||(o[7]=l=>v(C)?C.value=l:null)},t(es)),null,16),[[b,t(C)]])]),s("div",bt,[m(s("input",f({class:"form-check-input",type:"checkbox",checked:"",id:"isEnable","onUpdate:modelValue":o[8]||(o[8]=l=>v(N)?N.value=l:null)},t(os)),null,16),[[ns,t(N)]]),xt]),p(" "+d(t(_)),1)])]),s("div",yt,[s("div",kt,[s("div",wt,[s("div",null,[Ut,is(ks,{onSendImgData:z})])]),s("div",It,[s("div",$t,[s("div",null,[s("h5",Vt,"檔名 : "+d((h=c.value.value)==null?void 0:h.name),1),s("div",zt,[s("span",{class:U(["badge text-bg-netural-900",{"bg-success":((y=c.value.value)==null?void 0:y.type)==="jpeg"}])},"JPG",2),s("span",{class:U(["badge text-bg-netural-900 ms-1",{"bg-success":((L=c.value.value)==null?void 0:L.type)==="png"}])},"PNG",2),s("span",{class:U(["badge text-bg-netural-900 ms-1",{"bg-success":((R=c.value.value)==null?void 0:R.type)==="webp"}])},"WEBP",2)]),Dt,Mt]),s("div",Pt,[s("div",{class:U(["d-flex align-items-center text-success",{"text-danger":V((G=c.value.value)==null?void 0:G.size).checkSize}])},[s("span",St,d(V((K=c.value.value)==null?void 0:K.size).value),1),(k(),w("svg",At,[s("use",{"xlink:href":`/public/icons/icons.svg#${V((O=c.value.value)==null?void 0:O.size).checkSize?"x-circle":"check-circle"}`},null,8,Bt)]))],2),s("button",{type:"button",class:"btn btn-sm btn-success",onClick:o[9]||(o[9]=l=>M())},[p(" 點擊上傳 "),Et])])])])])])])]),Ft])])],512)],64)}}},Kt=Q(Tt,[["__scopeId","data-v-2fcf0d7a"]]);export{Kt as default};
